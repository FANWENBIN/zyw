$(function(){var t={verStatus:!0},e={init:function(){$("#getver").on("click",e.getver),$(":text[name=mb]").on("blur",e.mbver),$("#submit").on("click",e.submit)},submit:function(){/^1[345678]\d{9}$/.test($(":text[name=mb]").val())?/^(?=.*[a-zA-Z])(?=.*[0-9])[a-zA-Z0-9]{8,}$/.test($(":password[name=pass]").val())?/^.+$/.test($(":text[name=ver]").val())?$.ajax({type:"post",url:"./index.php?m=Home&c=Login&a=thpareg",data:{phone:$(":text[name=mb]").val(),passwd:$(":password[name=pass]").val(),verify:$(":text[name=ver]").val()},dataType:"json",success:function(t){console.log(t.msg),0===t.status?window.location.href="./index.php?m=Home&c=User&a=setting":103===t.status?$(".error").html("手机号码格式不正确"):105===t.status?$(".error").html("至少8位，至少包含数字和字符"):104===t.status?$(".error").html("验证码输入错误"):$(".error").html("服务器错误，请稍后再试")},error:function(){}}):$(".error").html("请输入验证码"):$(".error").html("至少8位，至少包含数字和字符"):$(".error").html("手机号码错误，请重新输入")},mbver:function(){/^1[345678]\d{9}$/.test($(":text[name=mb]").val())?$.ajax({type:"get",url:"./index.php?m=Home&c=Login&a=checkphone",data:{phone:$(":text[name=mb]").val()},dataType:"json",success:function(t){console.log(t.msg),0===t.status?$(".error").html(""):101===t.status?$(".error").html("手机号已被注册"):102===t.status?$(".error").html("验证失败，请稍后再试"):103===t.status?$(".error").html("手机不符合格式，请重新输入"):$(".error").html("服务器错误，请稍后再试")},error:function(){}}):$(".error").html("手机号码错误，请重新输入")},getver:function(){if(/^1[345678]\d{9}$/.test($(":text[name=mb]").val())){if(t.verStatus){t.verStatus=!1;var e=30,r=setInterval(function(){$("#getver").html(e--),0===e&&(clearInterval(r),t.verStatus=!0,$("#getver").html("发送验证码")),console.log(e)},1e3)}$.ajax({type:"get",url:"./index.php?m=Home&c=Login&a=sendyzm",data:{phone:$(":text[name=mb]").val()},dataType:"json",success:function(t){console.log(t.msg),0===t.status?$(".error").html("验证码已发送"):101===t.status?$(".error").html("手机号已被注册"):102===t.status?$(".error").html("验证失败，请稍后再试"):103===t.status?$(".error").html("手机不符合格式，请重新输入"):$(".error").html("服务器错误，请稍后再试")},error:function(){}})}else $(".error").html("手机号码错误，请重新输入")}};e.init()});