$(function(){var e={verStatus:!0},t={init:function(){$("#getVer").on("click",t.gerVer),$("#checkmb").on("click",t.checkmb),$("#confirmcode").on("click",t.confirmcode)},confirmcode:function(){/^.+$/.test($(":text[name=oldcode]").val())?/^.+$/.test($(":text[name=code]").val())?/^.+$/.test($(":text[name=recode]").val())?$(":text[name=code]").val()!==$(":text[name=recode]").val()?$(".step2 .error")("两次输入的密码不相等, 请检查后重新输入"):$.ajax({type:"get",url:"./index.php?m=Home&c=User&a=checkphver",data:{phone:$(":text[name=tel]").val(),version:$(":text[name=ver]").val()},dataType:"json",success:function(e){0===e.status?(console.log(e.msg),$(".step2").hide(),$(".step3").show()):103===e.status?($(".step2 .error")("两次输入的密码不相等，请检查后重新输入"),console.log(e.msg)):console.log(e.msg)},error:function(){}}):$(".step2 .error")("请再次输入新密码"):$(".step2 .error")("请输入新密码"):$(".step2 .error")("请输入旧密码")},checkmb:function(){$.ajax({type:"get",url:"./index.php?m=Home&c=User&a=checkphver",data:{phone:$(":text[name=tel]").val(),version:$(":text[name=ver]").val()},dataType:"json",success:function(e){0===e.status?(console.log(e.msg),$(".step1").hide(),$(".step2").show()):103===e.status?(alert("验证码错误"),console.log(e.msg)):console.log(e.msg)},error:function(){}})},gerVer:function(){/^.+$/.test($(":text[name=tel]").val())?(e.verStatus=!1,$.ajax({type:"get",url:"./index.php?m=Home&c=User&a=yzm",data:{phone:$(":text[name=tel]").val()},dataType:"json",success:function(t){0===t.status?($(".step1 .error").html("发送成功，请注意查收"),console.log(t.msg)):101===t.status?($(".step1 .error").html("服务器错误，请稍后再试"),console.log(t.msg)):102===t.status&&(console.log(t.msg),$(".step1 .error").html("手机号码错误，请检查错误后再试")),e.verStatus=!0},error:function(){}})):alert("手机号不能为空")}};t.init()});