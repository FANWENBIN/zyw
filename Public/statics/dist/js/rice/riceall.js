$(function(){var t={type:"fanssum",pageNum:1,imgUrl:""},e={init:function(){$(".group").on("click","li",e.tab),$(".creatRice").on("click",e.showCreateRice),$(".create-mask form").on("submit",e.formSubmit),$(".close").on("click",e.closeCreateRice),$(".confirm").on("click",e.closeConfirm),$("#file_upload").uploadify({swf:"public/statics/js/uploadify/uploadify.swf",uploader:"public/statics/js/uploadify/uploadify.php",buttonText:"上传粉丝团封面图",onUploadSuccess:function(t){console.log(t)}}),e.getPage(function(){pageInit(t.pageNum,10,function(t){e.getData(t)})}),e.getActor()},getActor:function(){$.ajax({type:"post",url:"./index.php?m=Home&c=Rice&a=actors",dataType:"json",success:function(t){console.log(t);for(var e="",a=t.data,n=0,o=a.length;o>n;n++)e+='<options value="'+a[n].id+'">'+a[n].name+"</options>";$(".actorname").html(e)},error:function(t){consolo.log(t)}})},closeConfirm:function(){$(this).parent().parent().hide()},closeCreateRice:function(){$(this).parent().parent().hide()},formSubmit:function(){return console.log($(":text[name=name]").val()),/^.+$/.test($(":text[name=name]").val())?($.ajax({type:"get",url:"",data:{},dataType:"json",success:function(){},error:function(){}}),!1):(alert("请填入明星名字"),!1)},showCreateRice:function(){$(".create-mask").show()},tab:function(){t.type=$(this).data("type"),$(".group li").removeClass("active"),$(this).addClass("active"),e.getPage(function(){pageInit(t.pageNum,10,function(t){e.getData(t)})})},getPage:function(e){$.ajax({type:"get",url:"./index.php?m=Home&c=Rice&a=morefans",data:{condition:t.type,p:1},dataType:"json",success:function(a){t.pageNum=a.data.page,e()},error:function(){}})},getData:function(e){$.ajax({url:"./index.php?m=Home&c=Rice&a=morefans",type:"get",dataType:"json",data:{condition:t.type,p:e},success:function(t){var e=t.data.data,a="";if(0==t.data.page)return $("#itemlist").html(a),!1;for(var n=0,o=e.length;o>n;n++)a+='<div class="item"><img src="'+e[n].img+'" alt="" /><p>'+e[n].name+'</p><div class="cover"><div class="info">粉丝数 '+e[n].fanssum+"&nbsp;&nbsp;贴&nbsp;量 "+e[n].posts+'</div><br/><a href="/zyw/index.php?m=Home&c=Rice&a=homepage&id='+e[n].id+'">我要报名</a></div></div>';$("#itemlist").html(a)},error:function(){}})}};e.init()});