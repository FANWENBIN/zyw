$(function(){var e={color1:1,sex1:1,color2:1,sex2:1},a={init:function(){$("#J_CommentSendbox .submit").on("click",a.commentSendClick),$("#J_ConRule .tab a").on("click",a.ruleTabClick),$("#groupColorList").on("click","li",a.loadStar),$("#groupSexList").on("click","li",a.loadStar),$("#conStarGroup").on("click","li",a.swtichTab),$("#judgeRuleName").on("click","li",a.swtichRule),$("#colorlist1").on("click","li",a.tabType1),$("#sexlist1").on("click","li",a.tabSex1),$("#colorlist2").on("click","li",a.tabType2),$("#sexlist2").on("click","li",a.tabSex2),$("#voterulelist").on("mouseenter","li",a.tabVoteRule),a.refleshgroup1(),a.refleshgroup2(),a.initStar(),a.resetGroup()},resetGroup:function(){var e=getCookie("color"),a=getCookie("sex");console.log(e,a),e&&$("#groupColorList").find("li").removeClass("active"),a&&$("#groupSexList").find("li").removeClass("active").removeClass("redselect").removeClass("blueselect").removeClass("greenselect"),"2"==a?$("#groupSexList").find(".female").addClass("active"):"1"==a&&$("#groupSexList").find(".male").addClass("active"),"redgroup"==e?($("#groupColorList").find(".red").addClass("active"),$("#groupSexList").find(".active").addClass("redselect"),$("#title").removeClass("blue").removeClass("green").addClass("red")):"bluegroup"==e?($("#groupColorList").find(".blue").addClass("active"),$("#groupSexList").find(".active").addClass("blueselect"),$("#title").removeClass("red").removeClass("green").addClass("blue")):"greengroup"==e&&($("#groupColorList").find(".green").addClass("active"),$("#groupSexList").find(".active").addClass("greenselect"),$("#title").removeClass("blue").removeClass("red").addClass("green"))},tabVoteRule:function(){$("#voterulegroup").find("li").hide(),$("#voterulegroup").find("li").eq($(this).index()).show()},tabSex1:function(){$("#sexlist1").find("li").removeClass("active"),$(this).addClass("active"),e.sex1=$(this).data("sex"),a.refleshgroup1()},tabType1:function(){$("#colorlist1").find("li").removeClass("active"),$(this).addClass("active"),e.color1=$(this).data("color"),a.refleshgroup1()},refleshgroup1:function(){$.ajax({url:"./index.php?m=Home&c=Vote&a=wininter&condition=36",type:"get",dataType:"json",data:{groupid:e.color1,sex:e.sex1},success:function(e){if(102==e.status)$(".successlist").hide();else if(0==e.status){for(var a="",s=0,t=e.data.length;t>s;s++)a+='<div class="item"><a href="./index.php?m=Home&c=Performing&a=actorinfo&id='+e.data[s].id+'" class="hover"></a><img class="img1" src="'+e.data[s].headimg+'" alt="" /><div class="text"><h1>'+e.data[s].name+"</h1><h3>当前票数:"+e.data[s].votes+"</h3></div></div>";$("#group1").html(a),$("#content1commet").hide()}}})},tabSex2:function(){$("#sexlist2").find("li").removeClass("active"),$(this).addClass("active"),e.sex2=$(this).data("sex"),a.refleshgroup2()},tabType2:function(){$("#colorlist2").find("li").removeClass("active"),$(this).addClass("active"),e.color2=$(this).data("color"),a.refleshgroup2()},refleshgroup2:function(){$.ajax({url:"./index.php?m=Home&c=Vote&a=wininter&condition=36",type:"get",dataType:"json",data:{groupid:e.color2,sex:e.sex2},success:function(e){if(102==e.status)$(".successlist").hide();else if(0==e.status){var a="";console.log(e.data);for(var s=0,t=e.data.length;t>s;s++)a+='<div class="item"><a href="./index.php?m=Home&c=Performing&a=actorinfo&id='+e.data[s].id+'" class="hover"></a><img class="img1" src="'+e.data[s].headimg+'" alt="" /><div class="text"><h1>'+e.data[s].name+"</h1><h3>当前票数:"+e.data[s].votes+"</h3></div></div>";$("#group2").html(a)}}}),$.ajax({url:"./index.php?m=Home&c=Vote&a=wininter&condition=6",type:"get",dataType:"json",data:{},success:function(e){if(console.log(e.status),102==e.status)$("#finallylist").hide();else if(0==e.status){console.log(e.data.length);for(var a="",s=0,t=e.data.length;t>s;s++)"红组"==e.data[s].groupid?a+='<div class="item"><a href="./index.php?m=Home&c=Performing&a=actorinfo&id='+e.data[s].id+'"></a><img src="'+e.data[s].headimg+'" alt="" /><div class="frame"></div><span class="name">'+e.data[s].name+'</span><div class="group redgroup">红组</div><p class="vote">总票数</p><p class="num">'+e.data[s].votes+"</p></div>":"蓝组"==e.data[s].groupid?a+='<div class="item"><a href="./index.php?m=Home&c=Performing&a=actorinfo&id='+e.data[s].id+'"></a><img src="'+e.data[s].headimg+'" alt="" /><div class="frame"></div><span class="name">'+e.data[s].name+'</span><div class="group bluegroup">蓝组</div><p class="vote">总票数</p><p class="num">'+e.data[s].votes+"</p></div>":"绿组"==e.data[s].groupid&&(a+='<div class="item"><a href="./index.php?m=Home&c=Performing&a=actorinfo&id='+e.data[s].id+'"></a><img src="'+e.data[s].headimg+'" alt="" /><div class="frame"></div><span class="name">'+e.data[s].name+'</span><div class="group greengroup">绿组</div><p class="vote">总票数</p><p class="num">'+e.data[s].votes+"</p></div>"),console.log(a),$("#finallygroup").html(a);$("#content2commet").hide()}}})},ruleTabClick:function(){var e=$(this).data("i");$("#J_ConRule .inner .content").hide(),$("#J_ConRule .inner .content"+e).show(),$("#J_ConRule .tab a.c").removeClass("c"),$(this).addClass("c")},swtichRule:function(){$("#judgeRuleName").find("li").removeClass("active"),$(this).addClass("active");var e=$(this).index();$("#judgeRuleContent").find(".content4gourp").hide(),$("#judgeRuleContent").find(".content4gourp").eq(e).show()},hover:function(e){"mouseenter"==e.type?$(this).find(".hover").stop(!0,!0).fadeIn(100):$(this).find(".hover").stop(!0,!0).fadeOut(100)},voteIn:function(){$(this).find(".hover").stop(!0,!0).fadeIn(300),$(this).find(".txt").stop(!0,!0).fadeOut(100)},voteOut:function(){$(this).find(".hover").stop(!0,!0).fadeOut(100),$(this).find(".txt").stop(!0,!0).fadeIn(100)},commentSendClick:function(e){var a=$.trim($("#J_CommentSendbox textarea").val());if(""==a)alert("请输入评论内容");else{var s="<div class='item clearFix'><div class='head'><img src='"+STATIC_FILE_ROOT+"statics/images/p/a10.jpeg' /></div><div class='info'><span>V网友：清晰白阳2 发表日期：2015-06-07 19:56</span><p>"+a+"</p></div></div>";$("#J_CommentList").prepend(s),$("#J_CommentSendbox textarea").val("")}},swtichTab:function(){$("#conStarGroup").find("li").removeClass("active"),$(this).addClass("active");var e=$(this).index();$("#starGroups").find(".group").hide(),$("#starGroups").find(".group").eq(e).show()},loadStar:function(){$("#groupSexList").find("li").removeClass("redselect").removeClass("blueselect").removeClass("greenselect"),$(this).parent().find("li").removeClass("active"),$(this).addClass("active");var e=$("#groupColorList").find(".active").data("color"),s=$("#groupSexList").find(".active").data("sex");setCookie("color",e),setCookie("sex",s),"redgroup"==e&&($("#title").removeClass("blue").removeClass("green").addClass("red"),$("#groupSexList").find(".active").addClass("redselect")),"bluegroup"==e&&($("#title").removeClass("red").removeClass("green").addClass("blue"),$("#groupSexList").find(".active").addClass("blueselect")),"greengroup"==e&&($("#title").removeClass("blue").removeClass("red").addClass("green"),$("#groupSexList").find(".active").addClass("greenselect")),$.ajax({type:"get",dataType:"json",data:{url:"/index.php?m=Home&c=Vote&",a:e,sex:s},success:function(e){if(0==e.status){for(var s="",t=0;t<e.data.length;t++)s+='<a href="./index.php?m=Home&c=Performing&a=actorinfo&id='+e.data[t].id+'"><div class="item">                            <div class="vote hover">                                <p>扫描二维码投票</p>                                <img src="'+e.data[t].codeimg+'"/>                                </div>                                <div class="txt">                                <p>'+e.data[t].name+"</p>                        <span>当前票数："+e.data[t].votes+'</span>                        </div>                        <img src="./Uploads'+e.data[t].img+'"/>                            </div></a>';$("#insertgroup").html(s),$("#J_ConVote .inner .item").off().hover(a.voteIn,a.voteOut)}}})},initStar:function(){$.ajax({type:"get",dataType:"json",data:{url:"/index.php?m=Home&c=Vote&",a:"redgroup",sex:"2"},success:function(e){if(0==e.status){for(var s="",t=0;t<e.data.length;t++)s+='<a href="./index.php?m=Home&c=Performing&a=actorinfo&id='+e.data[t].id+'"><div class="item">                            <div class="vote hover">                                <p>扫描二维码投票</p>                                <img src="'+e.data[t].codeimg+'"/>                                </div>                                <div class="txt">                                <p>'+e.data[t].name+"</p>                        <span>当前票数："+e.data[t].votes+'</span>                        </div>                        <img src="./Uploads'+e.data[t].img+'"/>                            </div></a>';$("#insertgroup").html(s),$("#J_ConVote .inner .item").off().hover(a.voteIn,a.voteOut)}else alert(e.msg)}})}};a.init()});