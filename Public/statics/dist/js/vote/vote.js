$(function(){var e={color1:1,sex1:1,color2:1,sex2:1,allcolor:"redgroup",allsex:"1"},s={init:function(){$("#J_CommentSendbox .submit").on("click",s.commentSendClick),$("#J_ConRule .tab a").on("click",s.ruleTabClick),$("#groupColorList").on("click","li",s.loadStar),$("#groupSexList").on("click","li",s.loadStar),$("#conStarGroup").on("click","li",s.swtichTab),$("#judgeRuleName").on("click","li",s.swtichRule),$("#colorlist1").on("click","li",s.tabType1),$("#sexlist1").on("click","li",s.tabSex1),$("#colorlist2").on("click","li",s.tabType2),$("#sexlist2").on("click","li",s.tabSex2),$("#voterulelist").on("mouseenter","li",s.tabVoteRule),s.refleshgroup1(),s.refleshgroup2(),s.initStar(),s.resetGroup()},resetGroup:function(){getCookie("color")&&(e.allcolor=getCookie("color")),getCookie("sex")&&(e.allsex=getCookie("sex")),console.log(e.allcolor,e.allsex),e.allcolor&&$("#groupColorList").find("li").removeClass("active"),e.allsex&&$("#groupSexList").find("li").removeClass("active").removeClass("redselect").removeClass("blueselect").removeClass("greenselect"),"2"==e.allsex?$("#groupSexList").find(".female").addClass("active"):"1"==e.allsex&&$("#groupSexList").find(".male").addClass("active"),"redgroup"==e.allcolor?($("#groupColorList").find(".red").addClass("active"),$("#groupSexList").find(".active").addClass("redselect"),$("#title").removeClass("blue").removeClass("green").addClass("red")):"bluegroup"==e.allcolor?($("#groupColorList").find(".blue").addClass("active"),$("#groupSexList").find(".active").addClass("blueselect"),$("#title").removeClass("red").removeClass("green").addClass("blue")):"greengroup"==e.allcolor&&($("#groupColorList").find(".green").addClass("active"),$("#groupSexList").find(".active").addClass("greenselect"),$("#title").removeClass("blue").removeClass("red").addClass("green")),s.getfromserver()},tabVoteRule:function(){$("#voterulegroup").find("li").hide(),$("#voterulegroup").find("li").eq($(this).index()).show()},tabSex1:function(){$("#sexlist1").find("li").removeClass("active"),$(this).addClass("active"),1==e.color1?($("#sexlist1").find("li").removeClass("redselect blueselect greenselect"),$(this).addClass("active").addClass("redselect")):2==e.color1?($("#sexlist1").find("li").removeClass("redselect blueselect greenselect"),$(this).addClass("active").addClass("blueselect")):3==e.color1&&($("#sexlist1").find("li").removeClass("redselect blueselect greenselect"),$(this).addClass("active").addClass("greenselect")),e.sex1=$(this).data("sex"),s.refleshgroup1()},tabType1:function(){$("#colorlist1").find("li").removeClass("active"),$(this).addClass("active"),e.color1=$(this).data("color"),1==e.color1?($(this).parent().parent().removeClass("red blue green").addClass("red"),$("#sexlist1").find(".active").removeClass("redselect blueselect greenselect").addClass("redselect")):2==e.color1?($(this).parent().parent().removeClass("red blue green").addClass("blue"),$("#sexlist1").find(".active").removeClass("redselect blueselect greenselect").addClass("blueselect")):3==e.color1&&($(this).parent().parent().removeClass("red blue green").addClass("green"),$("#sexlist1").find(".active").removeClass("redselect blueselect greenselect").addClass("greenselect")),s.refleshgroup1()},refleshgroup1:function(){$.ajax({url:"./index.php?m=Home&c=Vote&a=wininter&condition=36",type:"get",dataType:"json",data:{groupid:e.color1,sex:e.sex1},success:function(e){if(102==e.status)$(".successlist").hide();else if(0==e.status){for(var s="",a=0,t=e.data.length;t>a;a++)s+='<div class="item"><a target="_blank" href="./index.php?m=Home&c=Performing&a=actorinfo&id='+e.data[a].id+'" class="hover"></a><img class="img1" src="'+e.data[a].headimg+'" alt="" /><div class="text"><h1>'+e.data[a].name+"</h1><h3>当前票数:"+e.data[a].votes+"</h3></div></div>";$("#group1").html(s),$("#content1commet").hide()}}})},tabSex2:function(){$("#sexlist2").find("li").removeClass("active"),$(this).addClass("active"),1==e.color2?($("#sexlist2").find("li").removeClass("redselect blueselect greenselect"),$(this).addClass("active").addClass("redselect")):2==e.color2?($("#sexlist2").find("li").removeClass("redselect blueselect greenselect"),$(this).addClass("active").addClass("blueselect")):3==e.color2&&($("#sexlist2").find("li").removeClass("redselect blueselect greenselect"),$(this).addClass("active").addClass("greenselect")),e.sex2=$(this).data("sex"),s.refleshgroup2()},tabType2:function(){$("#colorlist2").find("li").removeClass("active"),$(this).addClass("active"),e.color2=$(this).data("color"),1==e.color2?($(this).parent().parent().removeClass("red blue green").addClass("red"),$("#sexlist2").find(".active").removeClass("redselect blueselect greenselect").addClass("redselect")):2==e.color2?($(this).parent().parent().removeClass("red blue green").addClass("blue"),$("#sexlist2").find(".active").removeClass("redselect blueselect greenselect").addClass("blueselect")):3==e.color2&&($(this).parent().parent().removeClass("red blue green").addClass("green"),$("#sexlist2").find(".active").removeClass("redselect blueselect greenselect").addClass("greenselect")),s.refleshgroup2()},refleshgroup2:function(){$.ajax({url:"./index.php?m=Home&c=Vote&a=wininter&condition=36",type:"get",dataType:"json",data:{groupid:e.color2,sex:e.sex2},success:function(e){if(102==e.status)$(".successlist").hide();else if(0==e.status){var s="";console.log(e.data);for(var a=0,t=e.data.length;t>a;a++)s+='<div class="item"><a target="_blank" href="./index.php?m=Home&c=Performing&a=actorinfo&id='+e.data[a].id+'" class="hover"></a><img class="img1" src="'+e.data[a].headimg+'" alt="" /><div class="text"><h1>'+e.data[a].name+"</h1><h3>当前票数:"+e.data[a].votes+"</h3></div></div>";$("#group2").html(s)}}}),$.ajax({url:"./index.php?m=Home&c=Vote&a=wininter&condition=6",type:"get",dataType:"json",data:{},success:function(e){if(console.log(e.status),102==e.status)$("#finallylist").hide();else if(0==e.status){console.log(e.data.length);for(var s="",a=0,t=e.data.length;t>a;a++)"红组"==e.data[a].groupid?s+='<div class="item"><a href="./index.php?m=Home&c=Performing&a=actorinfo&id='+e.data[a].id+'"></a><img src="'+e.data[a].headimg+'" alt="" /><div class="frame"></div><span class="name">'+e.data[a].name+'</span><div class="group redgroup">红组</div><p class="vote">总票数</p><p class="num">'+e.data[a].votes+"</p></div>":"蓝组"==e.data[a].groupid?s+='<div class="item"><a href="./index.php?m=Home&c=Performing&a=actorinfo&id='+e.data[a].id+'"></a><img src="'+e.data[a].headimg+'" alt="" /><div class="frame"></div><span class="name">'+e.data[a].name+'</span><div class="group bluegroup">蓝组</div><p class="vote">总票数</p><p class="num">'+e.data[a].votes+"</p></div>":"绿组"==e.data[a].groupid&&(s+='<div class="item"><a href="./index.php?m=Home&c=Performing&a=actorinfo&id='+e.data[a].id+'"></a><img src="'+e.data[a].headimg+'" alt="" /><div class="frame"></div><span class="name">'+e.data[a].name+'</span><div class="group greengroup">绿组</div><p class="vote">总票数</p><p class="num">'+e.data[a].votes+"</p></div>"),console.log(s),$("#finallygroup").html(s);$("#content2commet").hide()}}})},ruleTabClick:function(){var e=$(this).data("i");$("#J_ConRule .inner .content").hide(),$("#J_ConRule .inner .content"+e).show(),$("#J_ConRule .tab a.c").removeClass("c"),$(this).addClass("c")},swtichRule:function(){$("#judgeRuleName").find("li").removeClass("active"),$(this).addClass("active");var e=$(this).index();$("#judgeRuleContent").find(".content4gourp").hide(),$("#judgeRuleContent").find(".content4gourp").eq(e).show()},hover:function(e){"mouseenter"==e.type?$(this).find(".hover").stop(!0,!0).fadeIn(100):$(this).find(".hover").stop(!0,!0).fadeOut(100)},voteIn:function(){$(this).find(".hover").stop(!0,!0).fadeIn(300),$(this).find(".txt").stop(!0,!0).fadeOut(100)},voteOut:function(){$(this).find(".hover").stop(!0,!0).fadeOut(100),$(this).find(".txt").stop(!0,!0).fadeIn(100)},commentSendClick:function(e){var s=$.trim($("#J_CommentSendbox textarea").val());if(""==s)alert("请输入评论内容");else{var a="<div class='item clearFix'><div class='head'><img src='"+STATIC_FILE_ROOT+"statics/images/p/a10.jpeg' /></div><div class='info'><span>V网友：清晰白阳2 发表日期：2015-06-07 19:56</span><p>"+s+"</p></div></div>";$("#J_CommentList").prepend(a),$("#J_CommentSendbox textarea").val("")}},swtichTab:function(){$("#conStarGroup").find("li").removeClass("active"),$(this).addClass("active");var e=$(this).index();$("#starGroups").find(".group").hide(),$("#starGroups").find(".group").eq(e).show()},loadStar:function(){$("#groupSexList").find("li").removeClass("redselect").removeClass("blueselect").removeClass("greenselect"),$(this).parent().find("li").removeClass("active"),$(this).addClass("active"),e.allcolor=$("#groupColorList").find(".active").data("color"),e.allsex=$("#groupSexList").find(".active").data("sex"),setCookie("color",e.allcolor),setCookie("sex",e.allsex),"redgroup"==e.allcolor&&($("#title").removeClass("blue").removeClass("green").addClass("red"),$("#groupSexList").find(".active").addClass("redselect")),"bluegroup"==e.allcolor&&($("#title").removeClass("red").removeClass("green").addClass("blue"),$("#groupSexList").find(".active").addClass("blueselect")),"greengroup"==e.allcolor&&($("#title").removeClass("blue").removeClass("red").addClass("green"),$("#groupSexList").find(".active").addClass("greenselect")),s.getfromserver()},getfromserver:function(){$.ajax({type:"get",dataType:"json",data:{url:"/index.php?m=Home&c=Vote&",a:e.allcolor,sex:e.allsex},success:function(e){if(0==e.status){for(var a="",t=0;t<e.data.length;t++)a+='<a href="./index.php?m=Home&c=Performing&a=actorinfo&id='+e.data[t].id+'"><div class="item">                            <div class="vote hover">                                <p>扫描二维码投票</p>                                <img src="'+e.data[t].codeimg+'"/>                                </div>                                <div class="txt">                                <p>'+e.data[t].name+"</p>                        <span>当前票数："+e.data[t].votes+'</span>                        </div>                        <img src="./Uploads'+e.data[t].img+'"/>                            </div></a>';$("#insertgroup").html(a),$("#J_ConVote .inner .item").off().hover(s.voteIn,s.voteOut)}}})},initStar:function(){$.ajax({type:"get",dataType:"json",data:{url:"/index.php?m=Home&c=Vote&",a:"redgroup",sex:"2"},success:function(e){if(0==e.status){for(var a="",t=0;t<e.data.length;t++)a+='<a href="./index.php?m=Home&c=Performing&a=actorinfo&id='+e.data[t].id+'"><div class="item">                            <div class="vote hover">                                <p>扫描二维码投票</p>                                <img src="'+e.data[t].codeimg+'"/>                                </div>                                <div class="txt">                                <p>'+e.data[t].name+"</p>                        <span>当前票数："+e.data[t].votes+'</span>                        </div>                        <img src="./Uploads'+e.data[t].img+'"/>                            </div></a>';$("#insertgroup").html(a),$("#J_ConVote .inner .item").off().hover(s.voteIn,s.voteOut)}else alert(e.msg)}})}};s.init()});